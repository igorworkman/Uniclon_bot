# Troubleshooting FFmpeg and FSM Errors

Этот документ помогает оперативно диагностировать частые сбои пайплайна Uniclon.

## FFmpeg Error Codes

| Код | Описание | Рекомендации |
| --- | --- | --- |
| 1 | Общий сбой FFmpeg | Проверьте корректность путей входных/выходных файлов и прав доступа. |
| 255 | Ошибка парсинга фильтров | Убедитесь, что фильтр-цепочки экранированы и не содержат несовместимых фильтров. |
| Exit 134 | Аварийное завершение (abort) | Проверьте логи на предмет битых входных файлов или некорректных параметров кодирования. |

## FSM Failures

| Событие | Симптом | Решение |
| --- | --- | --- |
| `TransitionError` | FSM застревает на одном шаге | Убедитесь, что все обработчики состояний зарегистрированы и возвращают валидные данные. |
| `TimeoutError` | FSM не отвечает в течение 30 секунд | Проверьте нагрузку на систему и корректность настроек очередей. |

## Общие советы

- Запускайте `process_protective_v1.6.sh` с флагом `-v` для расширенного логирования.
- Перед деплоем обновляйте зависимости: `pip install -r requirements.txt`.
- При повторяющихся сбоях включите режим отладки `DEBUG=1` и соберите минимальный пример для воспроизведения.
