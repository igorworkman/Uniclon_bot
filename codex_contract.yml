# Autogenerated contract
modules:
  modules:
    _index.sh:
    core_init.sh:
      - core_init_environment
      - core_tmp_path
    file_ops.sh:
      - clear_temp
      - ensure_dir
      - ensure_dirs
      - file_size_bytes
      - touch_file
      - touch_randomize_mtime
    rng_utils.sh:
      - deterministic_md5
      - init_rng
      - rand_between
      - rand_bool
      - rand_choice
      - rand_float
      - rand_int
      - rand_uint32
      - random_seed
      - rng_next_chunk
    time_utils.sh:
      - clip_start
      - date_supports_d_flag
      - date_supports_v_flag
      - duration
      - epoch_to_iso
      - ffmpeg_time_to_seconds
      - format_past_timestamp
      - generate_iso_timestamp
      - iso_to_epoch
      - jitter_iso_timestamp
      - normalize_duration_value
      - normalize_ss_value
      - timestamp_offset
    fallback_manager.sh:
      - fallback_can_retry
      - fallback_low_uniqueness
      - fallback_should_similarity_regen
      - fallback_try_regen_quality
    manifest.sh:
      - manifest_init
      - manifest_write_entry
      - write_manifest
    metrics.sh:
      - metrics_compute_copy_metrics
      - metrics_compute_phash_diff
    report_builder.sh:
      - build_report
      - report_builder_finalize
      - report_builder_register_copy
      - report_builder_reset
  utils:
    helpers.sh:
      - clamp
      - parse_args
      - uuid_gen
    logger.sh:
      - log
      - log_error
      - log_info
      - log_warn
    safe_exec.sh:
      - check_exit
      - exec_with_retry
  bootstrap:
    bootstrap_compat.sh:
      - bootstrap_init
      - uuid_gen_short
scripts:
  process_protective_v1.6.sh:
    - _try_regen_quality
    - apply_audio_fallback
    - auto_expand_run_combos
    - calculate_duplicate_max
    - cleanup_temp_artifacts
    - collect_intro_clips
    - collect_lut_files
    - collect_music_variants
    - combo_key_seen
    - compose_af_chain
    - compose_vf_chain
    - compute_clip_window
    - compute_duration_profile
    - compute_metrics_for_copy
    - compute_phash_diff
    - duplicate_threshold
    - duration_bucket
    - ensure_run_combos
    - ensure_vf_format
    - escape_single_quotes
    - generate_copy
    - generate_dynamic_combo
    - generate_run_combos
    - log_uniqueness_summary
    - log_warn
    - low_uniqueness_fallback
    - mark_combo_key
    - mark_variant_key
    - need
    - next_regen_combo
    - pick_audio_chain
    - pick_crop_offsets
    - pick_music_variant_track
    - pick_qt_combo
    - pick_software_encoder
    - prepare_output_name
    - quality_check
    - rand_description
    - rand_title
    - remove_indices_for_regen
    - remove_last_generated
    - report_template_statistics
    - run_self_audit_pipeline
    - select_fps
    - unmark_combo_key
    - unmark_variant_key
    - usage
    - variant_key_seen
    - variant_max_share
    - warn_similar_copies
