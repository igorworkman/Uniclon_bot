#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∫–æ–±–æ–∫ –≤ Bash-—Å—Ç—Ä–æ–∫–∞—Ö (bash -c / eval)
# –¶–µ–ª—å: –Ω–∞–π—Ç–∏ –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –æ—à–∏–±–∫–∏ –≤–∏–¥–∞:
# "syntax error near unexpected token '('"

echo "üîç –ê–Ω–∞–ª–∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫–æ–±–∫–∏..."

# –û–≥—Ä–∞–Ω–∏—á–∏–º –ø–æ–∏—Å–∫ –Ω–∞ bash-—Å–∫—Ä–∏–ø—Ç—ã –∏ core/init —Ñ–∞–π–ª—ã
find . -type f \( -name "*.sh" -o -name "*.bash" \) | while read -r file; do
  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥
  grep -HnE 'bash -c|eval|ffmpeg.*\(.*\)|CUR_VF_EXTRA|CUR_AF_EXTRA' "$file" \
    | grep -E '\(|\)' \
    | grep -v '\\(' \
    | grep -v '#'
done > potential_parentheses_issues.log

if [ -s potential_parentheses_issues.log ]; then
  echo "‚ö†Ô∏è –ù–∞–π–¥–µ–Ω—ã –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã–µ —É—á–∞—Å—Ç–∫–∏:"
  cat potential_parentheses_issues.log
  echo ""
  echo "üìÇ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤: potential_parentheses_issues.log"
else
  echo "‚úÖ –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–∫–æ–±–∫–∞–º–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ."
fi
